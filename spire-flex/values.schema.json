{
    "$schema": "https://json-schema.org/draft/2019-09/schema",
    "$id": "http://helm-flex.spire.com/example.json",
    "type": "object",
    "default": {},
    "title": "Helm Flex Schema",
    "properties": {
        "agent": {
            "type": "object",
            "default": {},
            "title": "The .agent Schema",
            "properties": {
                "healthCheck": {
                    "type": "object",
                    "default": {},
                    "title": "The .agent.healthCheck Schema",
                    "properties": {
                        "enable": {
                            "type": "boolean",
                            "default": true,
                            "title": "The .agent.healtCheck.enable Schema",
                            "examples": [
                                true,
                                false
                            ]
                        },
                        "bindAddress": {
                            "type": "string",
                            "enum": [ "localhost", "0.0.0.0", "127.0.0.1", "::", "::1" ],
                            "default": "localhost",
                            "title": "The .agent.healtCheck.bindAddress Schema",
                            "examples": [
                                "localhost",
                                "0.0.0.0",
                                "127.0.0.1",
                                "::",
                                "::1"
                            ]
                        },
                        "bindPort": {
                            "type": "integer",
                            "default": 80,
                            "minimum": 1,
                            "maximum": 65535,
                            "title": "The .agent.healtCheck.bindPort Schema",
                            "examples": [
                                80,
                                8080,
                                9000
                            ]
                        },
                        "livePath": {
                            "type": "string",
                            "default": "/live",
                            "pattern": "^\/[-A-Za-z_0-9]+(/[-A-Za-z_0-9]+)*$",
                            "title": "The .agent.healtCheck.livePath Schema",
                            "examples": [
                                "/live",
                                "/i_am_alive"
                            ]
                        },
                        "readyPath": {
                            "type": "string",
                            "default": "/ready",
                            "pattern": "^\/[-A-Za-z_0-9]+(/[-A-Za-z_0-9]+)*$",
                            "title": "The .agent.healthCheck.readyPath Schema",
                            "examples": [
                                "/ready",
                                "/i_am_ready"
                            ]
                        }
                    }
                },
                "keyManager": {
                    "type": "object",
                    "default": {},
                    "title": "The .agent.keyManager Schema",
                    "properties": {
                        "type": {
                            "type": "string",
                            "enum": [ "custom", "disk", "memory" ],
                            "default": "disk",
                            "title": "The .agent.keyManager.type Schema",
                            "examples": [
                                "custom",
                                "disk",
                                "memory"
                            ]
                        },
                        "disk": {
                            "type": "object",
                            "default": {},
                            "title": "The .agent.keyManager.disk Schema",
                            "properties": {
                                "directory": {
                                    "type": "string",
                                    "default": "/opt/spire/data/agent/",
                                    "title": "The .agent.keyManager.type.disk Schema",
                                    "examples": [
                                        "/opt/spire/data/agent/",
                                        "/var/lib/spire-agent/"
                                    ]
                                }
                            }
                        },
                        "custom": {
                            "type": "object",
                            "default": {},
                            "title": "The .agent.keyManager.custom Schema",
                            "properties": {
                                "name": {
                                    "type": "string",
                                    "default": "customKeyManager",
                                    "title": "The .agent.keyManager.custom.name Schema",
                                    "examples": [
                                        "customKeyManager",
                                        "coprateKeyManager"
                                    ]
                                },
                                "checksum": {
                                    "type": "string",
                                    "title": "The .agent.keyManager.custom.checksum Schema",
                                    "examples": [
                                        "1725b8b7071f09f1a15255f0e580bc6c811190902d144f63c0a3dd0f24979c6e"
                                    ]
                                },
                                "cmd": {
                                    "type": "string",
                                    "title": "The .agent.keyManager.custom.cmd Schema",
                                    "examples": [
                                        "/opt/spire/agent/plugins/customKeyManager"
                                    ]
                                },
                                "data": {
                                    "type": "array",
                                    "title": "The .agent.keyManager.custom.data Schema",
                                    "examples": [
                                        "/opt/spire/agent/plugins/customKeyManager"
                                    ]
                                },
                                "enabled": {
                                    "type": "boolean",
                                    "default": true,
                                    "title": "The .agent.keyManager.custom.enabled Schema",
                                    "examples": [
                                        true,
                                        false
                                    ]
                                },
                                "data": {
                                    "type": "array",
                                    "default": [ ],
                                    "title": "The .agent.keyManager.custom.data Schema",
                                    "items": {
                                        "type": "string"
                                    },
                                    "examples": [
                                        "logging = true",
                                        "delay = 32",
                                        "name = \"item\""
                                    ]
                                }
                            }
                        }
                    }
                }
            },
            "examples": [{
                "healthCheck": { 
                }
            }, {
                "healthCheck": {
                    "enable": false
                }
            }, {
                "healthCheck": {
                    "enable": true,
                    "bindAddress": "localhost",
                    "bindPort": 80,
                    "livePath": "/live",
                    "readyPath": "/ready"
                }
            }, {
                "healthCheck": {
                    "enable": true,
                    "bindAddress": "::1",
                    "bindPort": 9000,
                    "livePath": "/live",
                    "readyPath": "/ready"
                }
            }]
        }
    },
    "examples": [{
        "agent": {
        }
    }, {
        "agent": {
            "healthCheck": {
            }
        }
    }, {
        "agent": {
            "healthCheck": {
                "enable": false
            }
        }
    }, {
        "agent": {
            "healthCheck": {
                "enable": true,
                "bindAddress": "localhost",
                "bindPort": 80,
                "livePath": "/live",
                "readyPath": "/ready"
            }
        }
    }, {
        "agent": {
            "healthCheck": {
                "enable": true,
                "bindAddress": "::1",
                "bindPort": 9000,
                "livePath": "/live",
                "readyPath": "/ready"
            }
        }
    }]
}
